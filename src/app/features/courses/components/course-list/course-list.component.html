<div class="page-wrapper">
  <div class="container">
    <!-- Header -->
    <div class="flex justify-between items-center mb-lg">
      <h1>Kurzusok</h1>
      <a routerLink="/courses/new" class="btn btn-primary">
        <span class="icon">‚ûï</span>
        √öj kurzus
      </a>
    </div>

    <!-- Filters & Search -->
    <div class="card mb-lg">
      <div class="filters-container">
        <!-- Search -->
        <div class="form-group">
          <label class="form-label">Keres√©s</label>
          <input 
            type="text" 
            class="form-control" 
            placeholder="Kurzus c√≠me..."
            (input)="onSearch($event)"
          />
        </div>

        <!-- Status Filter -->
        <div class="form-group">
          <label class="form-label">St√°tusz</label>
          <select 
            class="form-control"
            [(ngModel)]="selectedStatus"
            (change)="onFilterChange()"
          >
            <option value="">√ñsszes</option>
            <option value="planned">Tervezett</option>
            <option value="active">Akt√≠v</option>
            <option value="completed">Befejezett</option>
          </select>
        </div>

        <!-- Difficulty Filter -->
        <div class="form-group">
          <label class="form-label">Neh√©zs√©g</label>
          <select 
            class="form-control"
            [(ngModel)]="selectedDifficulty"
            (change)="onFilterChange()"
          >
            <option value="">√ñsszes</option>
            <option value="beginner">Kezd≈ë</option>
            <option value="intermediate">K√∂z√©phalad√≥</option>
            <option value="advanced">Halad√≥</option>
          </select>
        </div>

        <!-- Sort -->
        <div class="form-group">
          <label class="form-label">Rendez√©s</label>
          <div class="flex gap-sm">
            <select 
              class="form-control"
              [(ngModel)]="sortBy"
              (change)="onSortChange()"
            >
              <option value="created_at">D√°tum</option>
              <option value="title">C√≠m</option>
              <option value="difficulty">Neh√©zs√©g</option>
            </select>
            <button 
              class="btn btn-secondary"
              (click)="toggleSortOrder()"
              title="Rendez√©s ir√°nya"
            >
              {{ sortOrder === 'asc' ? '‚Üë' : '‚Üì' }}
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading State -->
    <div class="loading" *ngIf="loading">
      <div class="spinner"></div>
    </div>

    <!-- Error State -->
    <div class="card" *ngIf="error && !loading">
      <div class="empty-state">
        <div class="empty-state-icon">‚ö†Ô∏è</div>
        <p class="text-error">{{ error }}</p>
        <button class="btn btn-primary mt-md" (click)="loadCourses()">
          √öjrapr√≥b√°lkoz√°s
        </button>
      </div>
    </div>

    <!-- Courses Table -->
    <div class="table-container" *ngIf="!loading && !error && courses.length > 0">
      <table>
        <thead>
          <tr>
            <th>C√≠m</th>
            <th>Oktat√≥</th>
            <th>St√°tusz</th>
            <th>Neh√©zs√©g</th>
            <th>L√©trehozva</th>
            <th class="text-center">M≈±veletek</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let course of courses">
            <td>
              <strong>{{ course.title }}</strong>
              <p class="text-secondary" style="font-size: 14px; margin: 4px 0 0 0;">
                {{ course.description | slice:0:60 }}{{ course.description.length > 60 ? '...' : '' }}
              </p>
            </td>
            <td>{{ course.instructor }}</td>
            <td>
              <span class="badge" [ngClass]="getStatusClass(course.status)">
                {{ getStatusText(course.status) }}
              </span>
            </td>
            <td>{{ getDifficultyText(course.difficulty) }}</td>
            <td>{{ course.created_at | date:'yyyy-MM-dd' }}</td>
            <td>
              <div class="table-actions">
                <button 
                  class="btn btn-sm btn-secondary"
                  (click)="viewCourse(course.id!)"
                  title="Megtekint√©s"
                >
                  üëÅÔ∏è
                </button>
                <button 
                  class="btn btn-sm btn-primary"
                  (click)="editCourse(course.id!)"
                  title="Szerkeszt√©s"
                >
                  ‚úèÔ∏è
                </button>
                <button 
                  class="btn btn-sm btn-danger"
                  (click)="deleteCourse(course)"
                  title="T√∂rl√©s"
                >
                  üóëÔ∏è
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Empty State -->
    <div class="card" *ngIf="!loading && !error && courses.length === 0">
      <div class="empty-state">
        <div class="empty-state-icon">üìö</div>
        <p>M√©g nincsenek kurzusok</p>
        <a routerLink="/courses/new" class="btn btn-primary mt-md">
          Els≈ë kurzus l√©trehoz√°sa
        </a>
      </div>
    </div>

    <!-- Pagination -->
    <div class="pagination-container" *ngIf="!loading && totalPages > 1">
      <button 
        class="btn btn-outline"
        (click)="previousPage()"
        [disabled]="currentPage === 1"
      >
        ‚Üê El≈ëz≈ë
      </button>
      
      <div class="pagination-info">
        Oldal {{ currentPage }} / {{ totalPages }} (√∂sszesen: {{ totalItems }} kurzus)
      </div>

      <button 
        class="btn btn-outline"
        (click)="nextPage()"
        [disabled]="currentPage === totalPages"
      >
        K√∂vetkez≈ë ‚Üí
      </button>
    </div>
  </div>
</div>
